-- DarkMirrorClassicUI Library
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local playerGui = LocalPlayer:WaitForChild("PlayerGui")

local Library = {}
Library.__index = Library

-- Window Creation
function Library:CreateWindow(guiName, sidebarTitleText)
    local self = setmetatable({}, Library)

    -- ScreenGui
    self.ScreenGui = Instance.new("ScreenGui")
    self.ScreenGui.Name = guiName or "DarkMirrorClassicUI"
    self.ScreenGui.Parent = playerGui
    self.ScreenGui.ResetOnSpawn = false

    -- Show/Hide button
    local showIcon = "rbxassetid://YOUR_SHOW_ICON_ID"
    local hideIcon = "rbxassetid://YOUR_HIDE_ICON_ID"

    self.ShowHideBtn = Instance.new("ImageButton")
    self.ShowHideBtn.Size = UDim2.new(0, 60, 0, 60)
    self.ShowHideBtn.Position = UDim2.new(0, 24, 0.5, -30)
    self.ShowHideBtn.AnchorPoint = Vector2.new(0, 0.5)
    self.ShowHideBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    self.ShowHideBtn.Image = hideIcon
    self.ShowHideBtn.ZIndex = 99
    self.ShowHideBtn.Parent = self.ScreenGui

    local showHideStroke = Instance.new("UIStroke", self.ShowHideBtn)
    showHideStroke.Color = Color3.fromRGB(255,0,0)
    showHideStroke.Thickness = 2

    -- Main Frame
    self.MainFrame = Instance.new("Frame")
    self.MainFrame.Size = UDim2.new(0, 480, 0, 320)
    self.MainFrame.Position = UDim2.new(0.5, -240, 0.5, -160)
    self.MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    self.MainFrame.BackgroundTransparency = 0.25
    self.MainFrame.Parent = self.ScreenGui

    local mainStroke = Instance.new("UIStroke", self.MainFrame)
    mainStroke.Color = Color3.fromRGB(255, 0, 0)
    mainStroke.Thickness = 3

    -- Sidebar
    self.Sidebar = Instance.new("ScrollingFrame")
    self.Sidebar.Size = UDim2.new(0, 154, 1, 0)
    self.Sidebar.CanvasSize = UDim2.new(0,0,0,0)
    self.Sidebar.ScrollBarThickness = 4
    self.Sidebar.BackgroundColor3 = Color3.fromRGB(24,24,24)
    self.Sidebar.BackgroundTransparency = 0.3
    self.Sidebar.Active = true
    self.Sidebar.Parent = self.MainFrame

    local sidebarList = Instance.new("UIListLayout", self.Sidebar)
    sidebarList.SortOrder = Enum.SortOrder.LayoutOrder
    sidebarList.Padding = UDim.new(0,8)

    -- Sidebar Title
    local sidebarTitle = Instance.new("TextLabel")
    sidebarTitle.Size = UDim2.new(1,-24,0,38)
    sidebarTitle.Position = UDim2.new(0,12,0,8)
    sidebarTitle.BackgroundTransparency = 1
    sidebarTitle.Text = sidebarTitleText or "ClassicBruh"
    sidebarTitle.Font = Enum.Font.GothamBold
    sidebarTitle.TextSize = 24
    sidebarTitle.TextColor3 = Color3.fromRGB(255,255,255)
    sidebarTitle.TextXAlignment = Enum.TextXAlignment.Left
    sidebarTitle.Parent = self.Sidebar

    -- Content
    self.Content = Instance.new("Frame")
    self.Content.Size = UDim2.new(1, -166, 1, -20)
    self.Content.Position = UDim2.new(0, 154, 0, 10)
    self.Content.BackgroundColor3 = Color3.fromRGB(20,20,20)
    self.Content.BackgroundTransparency = 0.35
    self.Content.Parent = self.MainFrame

    self.Tabs = {}
    self.Buttons = {}

    -- Show/Hide logic
    local uiVisible = true
    self.ShowHideBtn.MouseButton1Click:Connect(function()
        uiVisible = not uiVisible
        self.MainFrame.Visible = uiVisible
        self.ShowHideBtn.Image = uiVisible and hideIcon or showIcon
    end)

    return self
end

-- Tab
function Library:CreateTab(name)
    local tabFrame = Instance.new("ScrollingFrame")
    tabFrame.Size = UDim2.new(1,0,1,0)
    tabFrame.BackgroundTransparency = 1
    tabFrame.Visible = false
    tabFrame.ScrollBarThickness = 6
    tabFrame.CanvasSize = UDim2.new(0,0,0,0)
    tabFrame.Parent = self.Content

    local layout = Instance.new("UIListLayout", tabFrame)
    layout.Padding = UDim.new(0,8)
    layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

    self.Tabs[name] = tabFrame

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -12, 0, 36)
    btn.BackgroundColor3 = Color3.fromRGB(30,30,30)
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.GothamMedium
    btn.TextSize = 16
    btn.TextXAlignment = Enum.TextXAlignment.Left
    btn.Parent = self.Sidebar

    btn.MouseButton1Click:Connect(function()
        for _, f in pairs(self.Tabs) do f.Visible = false end
        tabFrame.Visible = true
        for _, b in pairs(self.Buttons) do b.BackgroundColor3 = Color3.fromRGB(30,30,30) end
        btn.BackgroundColor3 = Color3.fromRGB(60,0,0)
    end)

    table.insert(self.Buttons, btn)
    if #self.Buttons == 1 then
        tabFrame.Visible = true
        btn.BackgroundColor3 = Color3.fromRGB(60,0,0)
    end

    return setmetatable({Frame = tabFrame}, {__index = Library})
end

-- Section
function Library:CreateSection(tab, text)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.9,0,0,32)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamBold
    label.TextSize = 20
    label.TextColor3 = Color3.fromRGB(255,50,50)
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = tab.Frame
end

-- Button
function Library:CreateButton(tab,text,callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0,80,0,24)
    btn.BackgroundColor3 = Color3.fromRGB(0,100,0)
    btn.Text = text
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 12
    btn.Parent = tab.Frame
    btn.MouseButton1Click:Connect(callback or function() end)
end

-- Toggle, Slider, Dropdown, Textbox follow the same style as your script
-- (I can fully expand them if you want this library to be 1:1 complete)

return Library
